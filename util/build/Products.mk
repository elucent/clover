# Sources

UTIL_SRC_ROOT := $(UTIL_PATH)

UTIL_CXX_HEADERS := $(wildcard $(UTIL_SRC_ROOT)/*.h)
UTIL_CXX_SOURCES := $(wildcard $(UTIL_SRC_ROOT)/*.cpp)

UTIL_DEBUG_OBJS := \
	$(UTIL_CXX_SOURCES:%.cpp=$(DEBUG_BUILD)/%.o)
UTIL_RELEASE_OBJS := \
	$(UTIL_CXX_SOURCES:%.cpp=$(RELEASE_BUILD)/%.o)
UTIL_DEBUG_HEADERS := $(UTIL_CXX_HEADERS:%.h=$(DEBUG_BUILD)/include/%.h)
UTIL_RELEASE_HEADERS := $(UTIL_CXX_HEADERS:%.h=$(RELEASE_BUILD)/include/%.h)
UTIL_DEBUG_DEPFILES := $(UTIL_CXX_SOURCES:%.cpp=$(DEBUG_BUILD)/%.d)
UTIL_RELEASE_DEPFILES := $(UTIL_CXX_SOURCES:%.cpp=$(RELEASE_BUILD)/%.d)

LINK_TESTS := $(UTIL_SRC_ROOT)/test/link.sh

TEST_HARNESS_SOURCES := $(UTIL_SRC_ROOT)/test/harness.cpp
TEST_HARNESS_DEBUG_OBJS := $(TEST_HARNESS_SOURCES:%.cpp=$(DEBUG_BUILD)/%.o)
TEST_HARNESS_RELEASE_OBJS := $(TEST_HARNESS_SOURCES:%.cpp=$(RELEASE_BUILD)/%.o)

UTIL_TEST_SOURCES := $(wildcard $(UTIL_SRC_ROOT)/test/*.cpp)
UTIL_TEST_DEBUG_OBJS := $(UTIL_TEST_SOURCES:%.cpp=$(DEBUG_BUILD)/%.o)
UTIL_TEST_RELEASE_OBJS := $(UTIL_TEST_SOURCES:%.cpp=$(RELEASE_BUILD)/%.o)

UTIL_DIRS_DEBUG := \
	$(DEBUG_BUILD)/$(UTIL_PATH)/test \
	$(DEBUG_BUILD)/include/$(UTIL_PATH)
UTIL_DIRS_RELEASE := \
	$(RELEASE_BUILD)/$(UTIL_PATH)/test \
	$(RELEASE_BUILD)/include/$(UTIL_PATH)

$(DEBUG_BUILD)/include/%.h: %.h
	cp $< $@

$(RELEASE_BUILD)/include/%.h: %.h
	cp $< $@
